<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Генератор домашнього завдання</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            text-align: left;
            position: relative;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            font-size: 28px;
        }
        
        .input-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        /* Ensure checkbox appears before text on one line */
        .toggle-row {
            display: grid;
            grid-template-columns: auto 1fr;
            align-items: center;
            column-gap: 8px;
            justify-content: start;
        }
        
        label {
            display: block;
            color: #555;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        input {
            width: 100%;
            padding: 12px 50px 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 15px;
            transition: border-color 0.3s;
        }
        
        .voice-btn {
            position: absolute;
            right: 10px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background 0.3s;
            width: auto;
            flex: none;
        }
        
        .voice-btn:hover {
            background: #f0f0f0;
            transform: none;
            box-shadow: none;
        }
        
        .voice-btn.recording {
            color: #f44336;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            display: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .suggestions.show {
            display: block;
        }
        
        .suggestion-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s;
        }
        
        .suggestion-item:hover,
        .suggestion-item.selected {
            background: #eef4ff;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }
        
        button {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .generate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .Ось ваш HTML-код з **доданою iframe-шапкою** на самому початку — точно такою ж, як у попередніх ваших проєктах:

- iframe завантажує `https://codenamexxv.github.io/webmenu/`
- Висота — `55px`, ширина — `100%`
- Без рамки, без відступу зверху
- Посилання на автора очищене від зайвих пробілів

---

### ✅ Оновлений повний код:

```html
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Генератор домашнього завдання</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            text-align: left;
            position: relative;
            margin-top: 55px; /* Відступ під iframe */
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            font-size: 28px;
        }
        
        .input-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        /* Ensure checkbox appears before text on one line */
        .toggle-row {
            display: grid;
            grid-template-columns: auto 1fr;
            align-items: center;
            column-gap: 8px;
            justify-content: start;
        }
        
        label {
            display: block;
            color: #555;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        input {
            width: 100%;
            padding: 12px 50px 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 15px;
            transition: border-color 0.3s;
        }
        
        .voice-btn {
            position: absolute;
            right: 10px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background 0.3s;
            width: auto;
            flex: none;
        }
        
        .voice-btn:hover {
            background: #f0f0f0;
            transform: none;
            box-shadow: none;
        }
        
        .voice-btn.recording {
            color: #f44336;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            display: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .suggestions.show {
            display: block;
        }
        
        .suggestion-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s;
        }
        
        .suggestion-item:hover,
        .suggestion-item.selected {
            background: #eef4ff;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }
        
        button {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .generate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .copy-btn {
            background: #4caf50;
            color: white;
        }
        
        .clear-btn {
            background: #f44336;
            color: white;
        }
        
        .result {
            margin-top: 30px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            display: none;
        }
        
        .result.show {
            display: block;
        }
        
        .result-text {
            color: #333;
            line-height: 1.6;
            font-size: 15px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }
        
        .notification.show {
            opacity: 1;
        }

        .author {
            text-align: center;
            margin-top: 30px;
            font-size: 13px;
            color: #777;
        }

        .author a {
            color: #667eea;
            text-decoration: none;
        }

        .author a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- iframe-шапка -->
	<iframe 
		src="https://codenamexxv.github.io/webmenu/"
		style="border: none; width: 100%; height: 55px; display: block; position: fixed; top: 0; left: 0; z-index: 100;"
		title="Навігаційна панель"
		scrolling="no"
		frameborder="0">
	</iframe>

    <div class="container">
        <h1>✅ Запис домашнього завдання</h1>
        
        <div class="input-group">
            <label for="input1">Рівень 1:</label>
            <div class="input-wrapper">
                <input type="text" id="input1" placeholder="Почніть вводити завдання..." spellcheck="true" lang="uk">
                <button class="voice-btn" onclick="startVoiceInput('input1', this)" title="Голосове введення">🎤</button>
            </div>
            <div class="suggestions" id="suggestions1"></div>
        </div>
        
        <div class="input-group">
            <label for="input2">Рівень 2:</label>
            <div class="input-wrapper">
                <input type="text" id="input2" placeholder="Почніть вводити завдання..." spellcheck="true" lang="uk">
                <button class="voice-btn" onclick="startVoiceInput('input2', this)" title="Голосове введення">🎤</button>
            </div>
            <div class="suggestions" id="suggestions2"></div>
        </div>
        
        <div class="input-group">
            <label class="toggle-row">
                <input type="checkbox" id="abbrevToggle" checked>
                Скорочення підчас голосового введення
            </label>
        </div>
        
        <div class="button-group">
            <button class="generate-btn" onclick="generateHomework()">Оформити завдання</button>
            <button class="copy-btn" onclick="copyToClipboard()">📋 Копіювати</button>
            <button class="clear-btn" onclick="clearAll()">🗑️ Очистити</button>
        </div>
        
        <div class="result" id="result">
            <div class="result-text" id="resultText"></div>
        </div>

        <div class="author">
            Автор: <a href="https://codenamexxv.github.io/teacher/" target="_blank">Ігор Шуляк</a>
        </div>
    </div>
    
    <div class="notification" id="notification">Скопійовано!</div>
    
    <script>
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition = null;
        let currentInputId = null;

        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.lang = 'uk-UA';
            recognition.continuous = true;
            recognition.interimResults = true;
            recognition.maxAlternatives = 1;
            
            let finalTranscript = '';
            let interimTranscript = '';
            let stopTimeout = null;

            recognition.onresult = (event) => {
                interimTranscript = '';
                finalTranscript = '';

                for (let i = 0; i < event.results.length; i++) {
                    const transcript = event.results[i][0].transcript;
                    if (event.results[i].isFinal) {
                        finalTranscript += transcript + ' ';
                    } else {
                        interimTranscript += transcript;
                    }
                }

                let fullTranscript = (finalTranscript + interimTranscript).trim();

                if (stopTimeout) {
                    clearTimeout(stopTimeout);
                }

                stopTimeout = setTimeout(() => {
                    recognition.stop();
                }, 4000);

                // === 1. ГОЛОСОВІ КОМАНДИ → СИМВОЛИ (базові, не залежать від галочки) ===
                fullTranscript = fullTranscript
                    .replace(/\s*кома\s*/gi, ', ')
                    .replace(/\s*крапка\s*/gi, '. ')
                    .replace(/\s*знак питання\s*/gi, '? ')
                    .replace(/\s*знак оклику\s*/gi, '! ')
                    .replace(/\s*двокрапка\s*/gi, ': ')
                    .replace(/\s*крапка з комою\s*/gi, '; ')
                    .replace(/\s*тире\s*/gi, ' — ')
                    .replace(/\s*дефіс\s*/gi, '-')
                    .replace(/\s*дужка відкрита\s*/gi, ' (')
                    .replace(/\s*дужка закрита\s*/gi, ') ')
                    .replace(/\s*лапки\s*/gi, '"');

                // Параграф і номер завжди скорочуємо (незалежно від галочки)
                fullTranscript = fullTranscript
                    .replace(/\s*параграф\s*/gi, ' § ')
                    .replace(/\s*номер\s*/gi, ' № ')
                    .replace(/§(\S)/g, '§ $1')
                    .replace(/№(\S)/g, '№ $1');

                // === 2. ЧИСЛА СЛОВАМИ → ЦИФРИ (незалежно від галочки) ===
                function wordsToNumbers(text) {
                    const numberMap = {
                        'нуль': '0',
                        'один': '1', 'одна': '1', 'одну': '1',
                        'два': '2', 'дві': '2',
                        'три': '3',
                        'чотири': '4',
                        'п\'ять': '5',
                        'шість': '6',
                        'сім': '7',
                        'вісім': '8',
                        'дев\'ять': '9',
                        'десять': '10',
                        'одинадцять': '11',
                        'дванадцять': '12',
                        'тринадцять': '13',
                        'чотирнадцять': '14',
                        'п\'ятнадцять': '15',
                        'шістнадцять': '16',
                        'сімнадцять': '17',
                        'вісімнадцять': '18',
                        'дев\'ятнадцять': '19',
                        'двадцять': '20',
                        'тридцять': '30',
                        'сорок': '40',
                        'п\'ятдесят': '50',
                        'шістдесят': '60',
                        'сімдесят': '70',
                        'вісімдесят': '80',
                        'дев\'яносто': '90',
                        'сто': '100'
                    };

                    let result = text;
                    const sortedWords = Object.keys(numberMap).sort((a, b) => b.length - a.length);
                    for (const word of sortedWords) {
                        const escapedWord = word.replace(/'/g, "\\'");
                        const regex = new RegExp(`\\b${escapedWord}\\b`, 'gi');
                        result = result.replace(regex, numberMap[word]);
                    }

                    // Об'єднуємо складені числа (напр. "двадцять п'ять" → "25")
                    result = result.replace(/\b(100|90|80|70|60|50|40|30|20)\s+(\d{1,2})\b/g, (match, tens, ones) => {
                        const t = parseInt(tens, 10);
                        const o = parseInt(ones, 10);
                        if (o < 10) {
                            return (t + o).toString();
                        }
                        return match;
                    });

                    return result;
                }

                fullTranscript = wordsToNumbers(fullTranscript);

                // Зчитуємо стан перемикача скорочень
                const shouldAbbreviate = document.getElementById('abbrevToggle')?.checked !== false;

                // === 3. СКОРОЧЕННЯ: ВПРАВА, СТОРІНКА (залежать від галочки) ===
                if (shouldAbbreviate) {
                    fullTranscript = fullTranscript
                        .replace(/вправу/gi, 'Впр.')
                        .replace(/вправа/gi, 'Впр.')
                        .replace(/вправи/gi, 'Впр.')
                        .replace(/сторінку/gi, 'с.')
                        .replace(/сторінці/gi, 'с.')
                        .replace(/сторінка/gi, 'с.');
                }

                // === 4. ФІНАЛЬНЕ ФОРМАТУВАННЯ ===
                fullTranscript = fullTranscript.replace(/\s+/g, ' ').trim();

                if (fullTranscript.length > 0) {
                    fullTranscript = fullTranscript.charAt(0).toUpperCase() + fullTranscript.slice(1);
                }

                // Робимо велику букву після крапки, але НЕ після скорочень Впр. та с.
                fullTranscript = fullTranscript.replace(/([.!?]\s+)([а-яіїєґ])/g, (match, p1, p2) => {
                    // Перевіряємо, чи це не скорочення Впр. або с.
                    const beforeMatch = fullTranscript.substring(0, fullTranscript.indexOf(match));
                    if (beforeMatch.endsWith('Впр.') || beforeMatch.endsWith('с.')) {
                        return match; // Не змінюємо регістр
                    }
                    return p1 + p2.toUpperCase();
                });

                if (currentInputId) {
                    const input = document.getElementById(currentInputId);
                    input.value = fullTranscript;
                    input.dispatchEvent(new Event('input'));
                }
            };

            recognition.onerror = (event) => {
                console.error('Помилка розпізнавання:', event.error);
                if (event.error === 'no-speech') {
                    alert('Не вдалося розпізнати мовлення. Спробуйте ще раз.');
                } else if (event.error === 'not-allowed') {
                    alert('Доступ до мікрофона заблоковано. Дозвольте використання мікрофона в налаштуваннях браузера.');
                }
                stopRecording();
            };

            recognition.onend = () => {
                if (stopTimeout) {
                    clearTimeout(stopTimeout);
                }
                stopRecording();
            };
        }

        function startVoiceInput(inputId, btn) {
            if (!SpeechRecognition) {
                alert('Ваш браузер не підтримує голосове введення. Спробуйте використати Chrome або Edge.');
                return;
            }

            currentInputId = inputId;
            finalTranscript = '';
            interimTranscript = '';
            
            if (btn.classList.contains('recording')) {
                recognition.stop();
            } else {
                btn.classList.add('recording');
                recognition.start();
            }
        }

        function stopRecording() {
            const voiceBtns = document.querySelectorAll('.voice-btn');
            voiceBtns.forEach(btn => btn.classList.remove('recording'));
        }

        const templates = [
            "Вивчити вірш",
            "Вивчити слова",
            "Виконати вправу № , с.",
            "Виконати вправу в зошиті",
            "Виконати діагностичну роботу",
            "Виконати контрольну роботу",
            "Виконати практичну роботу",
            "Виконати проектну роботу в групі",
            "Виконати тестове завдання",
            "Виконати творче завдання",
            "Виконати інтерактивну вправу",
            "Дописати вправу в зошиті",
            "Заповнити таблицю",
            "Знайти в інтернеті",
            "Намалювати малюнок на тему",
            "Написати конспект",
            "Написати листа про",
            "Опрацювати § , на с.",
            "Опрацювати текст",
            "Оформити схему",
            "Підготувати відповіді на питання",
            "Підготувати доповідь",
            "Підготувати короткий переказ тексту",
            "Підготувати презентацію за темою",
            "Підготувати презентацію про",
            "Підготувати реферат",
            "Підготуватися до діагностичної роботи",
            "Провести дослідження",
            "Провести самооцінювання роботи",
            "Прочитати § , с. ",
            "Розв'язати задачу № , с.",
            "Скласти діалог",
            "Скласти план до теми",
            "Скласти повідомлення про",
            "Скласти питання до тексту",
            "Створити проєкт на тему"
        ];

        setupAutocomplete('input1', 'suggestions1');
        setupAutocomplete('input2', 'suggestions2');

        function setupAutocomplete(inputId, suggestionsId) {
            const input = document.getElementById(inputId);
            const suggestionsContainer = document.getElementById(suggestionsId);
            let selectedIndex = -1;
            let currentSuggestions = [];

            input.addEventListener('input', () => {
                const value = input.value.trim();
                selectedIndex = -1;

                if (value === '') {
                    suggestionsContainer.classList.remove('show');
                    return;
                }

                currentSuggestions = templates.filter(template =>
                    template.toLowerCase().startsWith(value.toLowerCase())
                );

                if (currentSuggestions.length === 0) {
                    suggestionsContainer.classList.remove('show');
                    return;
                }

                renderSuggestions();
                suggestionsContainer.classList.add('show');
            });

            input.addEventListener('keydown', (e) => {
                if (!suggestionsContainer.classList.contains('show')) return;

                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    selectedIndex = Math.min(selectedIndex + 1, currentSuggestions.length - 1);
                    updateSelected();
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    selectedIndex = Math.max(selectedIndex - 1, -1);
                    updateSelected();
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    if (selectedIndex >= 0) {
                        selectSuggestion(currentSuggestions[selectedIndex]);
                    }
                    suggestionsContainer.classList.remove('show');
                } else if (e.key === 'Escape') {
                    suggestionsContainer.classList.remove('show');
                }
            });

            function renderSuggestions() {
                suggestionsContainer.innerHTML = '';
                currentSuggestions.forEach((suggestion, index) => {
                    const div = document.createElement('div');
                    div.className = 'suggestion-item';
                    div.textContent = suggestion;
                    if (index === selectedIndex) div.classList.add('selected');
                    div.addEventListener('click', () => {
                        selectSuggestion(suggestion);
                        suggestionsContainer.classList.remove('show');
                    });
                    suggestionsContainer.appendChild(div);
                });
            }

            function updateSelected() {
                const items = suggestionsContainer.querySelectorAll('.suggestion-item');
                items.forEach((item, index) => {
                    if (index === selectedIndex) {
                        item.classList.add('selected');
                    } else {
                        item.classList.remove('selected');
                    }
                });
            }

            function selectSuggestion(suggestion) {
                input.value = suggestion;
                input.focus();
            }

            input.addEventListener('blur', () => {
                setTimeout(() => {
                    suggestionsContainer.classList.remove('show');
                }, 150);
            });
        }

        function generateHomework() {
            const input1 = document.getElementById('input1').value.trim();
            const input2 = document.getElementById('input2').value.trim();
            
            let parts = [];
            
            if (input1) {
                parts.push(`${input1} (І)`);
            }
            if (input2) {
                parts.push(`${input2} (ІІ)`);
            }
            
            if (parts.length === 0) {
                alert('Будь ласка, заповніть хоча б одне поле!');
                return;
            }
            
            const homework = parts.join('; ') + '.';
            
            document.getElementById('resultText').textContent = homework;
            document.getElementById('result').classList.add('show');
        }
        
        function copyToClipboard() {
            const resultText = document.getElementById('resultText').textContent;
            
            if (!resultText) {
                alert('Спочатку створіть завдання!');
                return;
            }
            
            navigator.clipboard.writeText(resultText).then(() => {
                const notification = document.getElementById('notification');
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 2000);
            }).catch(err => {
                alert('Помилка копіювання: ' + err);
            });
        }
        
        function clearAll() {
            document.getElementById('input1').value = '';
            document.getElementById('input2').value = '';
            document.getElementById('result').classList.remove('show');
            document.getElementById('resultText').textContent = '';
            document.getElementById('suggestions1').classList.remove('show');
            document.getElementById('suggestions2').classList.remove('show');
        }
        
        document.getElementById('input1').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !document.getElementById('suggestions1').classList.contains('show')) {
                document.getElementById('input2').focus();
            }
        });
        
        document.getElementById('input2').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !document.getElementById('suggestions2').classList.contains('show')) {
                generateHomework();
            }
        });
    </script>
</body>
</html>
